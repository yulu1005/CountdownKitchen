graph TD
    subgraph 表示層（Presentation Layer）
        A[所有畫面活動 Activities] --> B[主畫面 MainActivity]
        A --> C[搜尋畫面 SearchActivity]
        A --> D[分析圖表畫面 AnalyzeActivity]
        A --> E[設定畫面 SettingActivity]
        A --> V[相機畫面 CameraActivity]
        
        B --> F[UI 元件]
        C --> F
        D --> F
        E --> F
        V --> W[相機預覽畫面 Camera Preview]
        V --> X[條碼掃描 QR Scanner]
    end

    subgraph 資料層（Data Layer）
        G[本地資料庫 Room DB] --> H[FoodDao（食物資料）]
        G --> I[WasteDao（報廢資料）]
        G --> J[EatenDao（吃完紀錄）]
        
        H --> K[FoodItem（食物項目）]
        I --> L[WasteItem（報廢項目）]
        J --> M[EatenItem（已吃項目）]
    end

    subgraph 商業邏輯層（Business Logic）
        N[ViewModel] --> O[食物管理邏輯]
        N --> P[報廢分析邏輯]
        N --> Q[搜尋邏輯]
        N --> R[QR Code 處理邏輯]
    end

    subgraph 外部 API（External APIs）
        S[Android 相機 API] --> T[相機功能]
        U[ZXing 掃描套件] --> Y[QR Code 解碼功能]
    end

    F --> N
    N --> G
    V --> S
    V --> U
    Y --> R

    style A fill:#f9f,stroke:#333,stroke-width:2px
    style G fill:#bbf,stroke:#333,stroke-width:2px
    style N fill:#bfb,stroke:#333,stroke-width:2px
    style S fill:#fbb,stroke:#333,stroke-width:2px
    style U fill:#fbb,stroke:#333,stroke-width:2px
